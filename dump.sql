create SCHEMA `goods`;
USE `goods`;
create TABLE `role` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB;
create TABLE `user` ( `id` INT NOT NULL AUTO_INCREMENT, `username` VARCHAR(45) NOT NULL, `fio` VARCHAR(45) NOT NULL, `password` VARCHAR(45) NOT NULL, `role_id` INT NOT NULL, PRIMARY KEY (`id`), INDEX `fk_user_role_idx` (`role_id` ASC) VISIBLE, CONSTRAINT `fk_user_role` FOREIGN KEY (`role_id`) REFERENCES `role` (`id`) ON delete NO ACTION ON update NO ACTION) ENGINE = InnoDB;
create TABLE `supplier` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, `address` VARCHAR(45) NOT NULL, `phonenumber` VARCHAR(45) NOT NULL, `hidden` INT NOT NULL DEFAULT 0, PRIMARY KEY (`id`)) ENGINE = InnoDB;
create TABLE `unit` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB;
create TABLE `food` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, `amount` INT NOT NULL DEFAULT 0, `price` INT NOT NULL, `unit_id` INT NOT NULL, `supplier_id` INT NOT NULL, `hidden` INT NOT NULL DEFAULT 0, PRIMARY KEY (`id`), INDEX `fk_food_unit1_idx` (`unit_id` ASC) VISIBLE, INDEX `fk_food_supplier1_idx` (`supplier_id` ASC) VISIBLE, CONSTRAINT `fk_food_unit1` FOREIGN KEY (`unit_id`) REFERENCES `unit` (`id`) ON delete NO ACTION ON update NO ACTION, CONSTRAINT `fk_food_supplier1` FOREIGN KEY (`supplier_id`) REFERENCES `supplier` (`id`) ON delete NO ACTION ON update NO ACTION) ENGINE = InnoDB;
create TABLE `customer` ( `id` INT NOT NULL AUTO_INCREMENT, `fio` VARCHAR(45) NOT NULL, `phonenumber` VARCHAR(45) NOT NULL, `hidden` INT NOT NULL DEFAULT 0, PRIMARY KEY (`id`)) ENGINE = InnoDB;
create TABLE `status` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB;
create TABLE `contract` ( `id` INT NOT NULL AUTO_INCREMENT, `date` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP(), `customer_id` INT NOT NULL, `percent` INT NOT NULL, `delivery_date` DATETIME NOT NULL, `status_id` INT NOT NULL DEFAULT 1, PRIMARY KEY (`id`), INDEX `fk_contract_customer1_idx` (`customer_id` ASC) VISIBLE, INDEX `fk_contract_status1_idx` (`status_id` ASC) VISIBLE, CONSTRAINT `fk_contract_customer1` FOREIGN KEY (`customer_id`) REFERENCES `customer` (`id`) ON delete NO ACTION ON update NO ACTION, CONSTRAINT `fk_contract_status1` FOREIGN KEY (`status_id`) REFERENCES `status` (`id`) ON delete NO ACTION ON update NO ACTION) ENGINE = InnoDB;
create TABLE `food_has_contract` ( `food_id` INT NOT NULL, `contract_id` INT NOT NULL, `amount` INT NOT NULL, PRIMARY KEY (`food_id`, `contract_id`), INDEX `fk_food_has_contract_contract1_idx` (`contract_id` ASC) VISIBLE, INDEX `fk_food_has_contract_food1_idx` (`food_id` ASC) VISIBLE, CONSTRAINT `fk_food_has_contract_food1` FOREIGN KEY (`food_id`) REFERENCES `food` (`id`) ON delete NO ACTION ON update NO ACTION, CONSTRAINT `fk_food_has_contract_contract1` FOREIGN KEY (`contract_id`) REFERENCES `contract` (`id`) ON delete NO ACTION ON update NO ACTION) ENGINE = InnoDB;
INSERT INTO `role` VALUES (1,'Кладовщик'),(2,'Администратор');
INSERT INTO `user` VALUES (1,'root','root','63a9f0ea7bb98050796b649e85481845',2);
INSERT INTO `unit` VALUES (1,'кг'),(2,'л'),(3,'шт');
INSERT INTO `status` VALUES (1,'Новый'),(2,'В пути'),(3,'Завершен');